var g={"media:toggle":t=>{let e=t.getTargets()[0];if(!e||typeof e.play!="function")return;let{invoker:n}=t,o=n.dataset.playText||"Pause",r=n.dataset.pauseText||"Play";e.paused?e.play().then(()=>{n.textContent=o,n.setAttribute("aria-pressed","true")}).catch(a=>console.error("Invokers: Media play failed.",a)):(e.pause(),n.textContent=r,n.setAttribute("aria-pressed","false"))},"media:seek":t=>{let e=t.getTargets()[0],n=parseFloat(t.invoker.dataset.seek||"0");!e||!isFinite(n)||(e.currentTime=Math.max(0,Math.min(e.duration,e.currentTime+n)))},"media:mute":t=>{let e=t.getTargets()[0];e&&(e.muted=!e.muted,t.invoker.setAttribute("aria-pressed",String(e.muted)))},"carousel:nav":t=>{let e=t.getTargets()[0],n=t.invoker.dataset.direction;if(!e||n!=="next"&&n!=="prev")return;let o=Array.from(e.children);if(o.length<2)return;let r=o.findIndex(c=>!c.hasAttribute("hidden")),a=r===-1?0:r,s=n==="next"?(a+1)%o.length:(a-1+o.length)%o.length,i=()=>{o.forEach((c,d)=>{c.toggleAttribute("hidden",d!==s)})};document.startViewTransition?document.startViewTransition(i):i()},"clipboard:copy":async t=>{let e=t.getTargets()[0],{invoker:n}=t;if(!e)return;if(!navigator.clipboard){console.warn("Invokers: Clipboard API not available or not in a secure context.");return}let o=n.textContent||"",r=n.dataset.feedbackText||"Copied!",a=n.dataset.errorText||"Error!",s=e.tagName==="INPUT"||e.tagName==="TEXTAREA"?e.value:e.textContent||"";n.setAttribute("disabled","");try{await navigator.clipboard.writeText(s),n.textContent=r}catch(i){console.error("Invokers: Failed to copy text.",i),n.textContent=a}finally{setTimeout(()=>{n.textContent=o,n.removeAttribute("disabled")},2e3)}},"form:reset":t=>{let e=t.getTargets()[0];e instanceof HTMLFormElement&&e.reset()},"form:submit":t=>{let e=t.getTargets()[0];e instanceof HTMLFormElement&&e.requestSubmit()},"input:step":t=>{let e=t.getTargets()[0];if(!(e instanceof HTMLInputElement)||e.type!=="number")return;let n=parseFloat(t.invoker.dataset.step||"0");isFinite(n)&&(n>0?e.stepUp(n):n<0&&e.stepDown(Math.abs(n)),e.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})))},"scroll:to":t=>{let e=t.getTargets()[0];e&&e.scrollIntoView({behavior:"smooth",block:"start"})},"dom:remove":t=>{let e=t.getTargets();if(e.length===0)return;let n=()=>e.forEach(o=>o.remove());document.startViewTransition?document.startViewTransition(n):n()},"dom:replace":t=>{let e=t.getTargets();if(e.length===0)return;let n=m(t.invoker);if(!n)return;let o=()=>{e.forEach((r,a)=>{let s=a===0?n:n.cloneNode(!0);r.replaceWith(s)})};document.startViewTransition?document.startViewTransition(o):o()},"dom:swap":t=>{let e=t.getTargets();if(e.length===0)return;let n=m(t.invoker);if(!n)return;let o=()=>{e.forEach((r,a)=>{let s=a===0?n:n.cloneNode(!0);r.replaceChildren(s)})};document.startViewTransition?document.startViewTransition(o):o()},"dom:append":t=>{let e=t.getTargets();if(e.length===0)return;let n=m(t.invoker);n&&e.forEach((o,r)=>{let a=r===0?n:n.cloneNode(!0);o.append(a)})},"dom:prepend":t=>{let e=t.getTargets();if(e.length===0)return;let n=m(t.invoker);n&&e.forEach((o,r)=>{let a=r===0?n:n.cloneNode(!0);o.prepend(a)})},"fetch:get":async t=>{let{invoker:e,getTargets:n}=t,o=n(),r=e.dataset.url;if(!r){console.warn("Invokers: `fetch:get` requires a `data-url` attribute.",e);return}if(o.length===0){console.warn("Invokers: `fetch:get` requires `aria-controls` or `data-target`.",e);return}l(e,!0),u(e,o,"data-loading-template");try{let a=await fetch(r,{method:"GET",headers:{Accept:"text/html",...C(e)}});if(!a.ok)throw new Error(`HTTP ${a.status} ${a.statusText}`);let s=await a.text(),i=h(s),c=()=>{o.forEach((d,f)=>{let p=f===0?i:i.cloneNode(!0);d.replaceChildren(p)})};await(document.startViewTransition?document.startViewTransition(c).finished:Promise.resolve(c())),T(e,o)}catch(a){console.error("Invokers: `fetch:get` failed.",a),u(e,o,"data-error-template")}finally{l(e,!1)}},"fetch:send":async t=>{let e=t.getTargets()[0];if(!(e instanceof HTMLFormElement)){console.warn("Invokers: `fetch:send` requires `aria-controls` to point to a valid <form>.",t.invoker);return}let n=t.invoker.dataset.responseTarget,o=n?Array.from(document.querySelectorAll(n)):[e],r=e.action,a=(e.method||"POST").toUpperCase();if(!r){console.warn("Invokers: Target form for `fetch:send` must have an `action` attribute.",e);return}l(t.invoker,!0),u(t.invoker,o,"data-loading-template");try{let s=await fetch(r,{method:a,body:new FormData(e),headers:C(t.invoker)});if(!s.ok)throw new Error(`HTTP ${s.status} ${s.statusText}`);let i=await s.text(),c=h(i),d=()=>{o.forEach((f,p)=>{let w=p===0?c:c.cloneNode(!0);f.replaceChildren(w)})};await(document.startViewTransition?document.startViewTransition(d).finished:Promise.resolve(d())),T(t.invoker,o)}catch(s){console.error(`Invokers: \`fetch:send\` (${a}) failed.`,s),u(t.invoker,o,"data-error-template")}finally{l(t.invoker,!1)}},"navigate:to":t=>{let e=t.invoker.dataset.url;if(!e){console.warn("Invokers: `navigate:to` command requires a `data-url` attribute.",t.invoker);return}window.history&&typeof window.history.pushState=="function"?(window.history.pushState({},"",e),window.dispatchEvent(new PopStateEvent("popstate",{state:{}}))):window.location.href=e}};function v(t){if(!window.Invoker){console.error("Invokers core library not found. Please ensure it is loaded before the commands module.");return}let e=t||Object.keys(g);for(let n of e)g[n]&&window.Invoker.register(n,g[n])}function m(t){let e=t.dataset.templateId,n=t.dataset.cloneId;if(e){let o=document.getElementById(e);return o instanceof HTMLTemplateElement?o.content.cloneNode(!0):(console.error(`Invokers: Source with ID "${e}" not found or is not a <template>.`,t),null)}if(n){let o=document.getElementById(n);if(!o)return console.error(`Invokers: Clone source with ID "${n}" not found.`,t),null;let r=document.createDocumentFragment();return r.appendChild(o.cloneNode(!0)),r}return console.warn("Invokers: DOM command requires `data-template-id` or `data-clone-id`.",t),null}function l(t,e){t.toggleAttribute("disabled",e),t.setAttribute("aria-busy",String(e))}function u(t,e,n){let o=t.getAttribute(n);if(!o||e.length===0)return;let r=document.getElementById(o);if(!(r instanceof HTMLTemplateElement)){console.warn(`Invokers: Feedback template "#${o}" not found or is not a <template>.`);return}let a=r.content.cloneNode(!0);e.forEach((s,i)=>{let c=i===0?a:a.cloneNode(!0);s.replaceChildren(c)})}function h(t){let n=new DOMParser().parseFromString(t,"text/html"),o=document.createDocumentFragment();return o.append(...Array.from(n.body.childNodes)),o}function T(t,e){let n=t.dataset.thenCommand;if(!n||e.length===0)return;let o=document.createElement("button");o.setAttribute("command",n);for(let i in t.dataset)if(i.startsWith("then")){let c=i.charAt(4).toLowerCase()+i.slice(5);o.dataset[c]=t.dataset[i]}let r=e.map(i=>i.id).filter(Boolean);r.length>0&&o.setAttribute("aria-controls",r.join(" "));let a=e[0],s=new CustomEvent("command",{bubbles:!0,cancelable:!0,detail:{command:n,invokerElement:o}});s.command=n,s.invokerElement=o,a.dispatchEvent(s)}function C(t){let e={};for(let n in t.dataset)if(n.startsWith("header")){let o=n.substring(6).replace(/([A-Z])/g,"-$1").toLowerCase();o&&(e[o]=t.dataset[n])}return e}export{g as commands,v as registerAll};
