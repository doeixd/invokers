<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src * 'self' blob: data: gap:; style-src * 'self' 'unsafe-inline' blob: data: gap:; script-src * 'self' 'unsafe-eval' 'unsafe-inline' blob: data: gap:; object-src * 'self' blob: data: gap:; img-src * 'self' 'unsafe-inline' blob: data: gap:; connect-src * 'self' 'unsafe-inline' blob: data: gap:; frame-src * 'self' blob: data: gap:;">
    <title>Test Edit Form</title>
    <script type="module" src="dist/esm/development/index.js"></script>
    <script type="module">
        import { enableAdvancedEvents } from './dist/esm/development/advanced.js';
        enableAdvancedEvents();
    </script>
    <style>
        .edit-form { border: 1px solid #ccc; padding: 10px; margin: 10px; }
        input { margin: 5px; }
    </style>
</head>
<body>
    <div id="test-container">
        <div class="edit-form" id="edit-form-1">
            <input type="text" value="Test Title"
                   command-on="input"
                   command="--bind:value"
                    commandfor="@closest(.edit-form)"
                   data-bind-as="data:title">
            <div>Bound value: <span id="output"></span></div>
        </div>
    </div>

    <script>
        // Simple test to check if binding works
        const form = document.getElementById('edit-form-1');
        const input = form.querySelector('input');
        const output = document.getElementById('output');

        // Update output when form data changes
        const observer = new MutationObserver(() => {
            output.textContent = form.dataset.title || '';
        });
        observer.observe(form, { attributes: true, attributeFilter: ['data-title'] });

        // Initial value
        output.textContent = form.dataset.title || '';
    </script>
</body>
</html>